[
  {
    "uniqueIdentifier": "dde3b0f1-8bc6-4b56-b2a4-cf5eda7f2aaf",
    "payload": {
      "name": "Bike_RTDashboard",
      "type": "kqlQueries"
    },
    "type": "container-v1"
  },
  {
    "uniqueIdentifier": "f19499fa-7253-449c-97a9-8698662d455c",
    "payload": {
      "name": "Bicycles event",
      "runSettings": {
        "executionIntervalInSeconds": 86400
      },
      "query": {
        "queryString": "declare query_parameters (startTime:datetime, _placeHolder__end:datetime);\nlet InNeighborhood = dynamic(null);\nlet InStreet = dynamic(null);\nlet FilterBikeStream = () {\n    Bikestream\n    | where isempty(['InNeighborhood']) or Neighbourhood in (['InNeighborhood'])\n    | where isempty(['InStreet']) or Street in (['InStreet'])\n    | extend ingestionTime = ingestion_time()\n    | extend fill_rate = toreal(No_Bikes) / (No_Bikes + No_Empty_Docks)\n};\nlet minimumTime = toscalar(FilterBikeStream | summarize min(ingestionTime));\nlet from=max_of(startTime, minimumTime);\nFilterBikeStream\n| make-series emptyDocks=max(No_Empty_Docks)  default=int(null)\n    on ingestionTime from from to now() step max_of((now() - from)/100, 1d) by BikepointID\n| extend emptyDocks = series_fill_linear(emptyDocks)\n| mvexpand emptyDocks, ingestionTime\n| summarize ['Available Docks'] = sum(toint(emptyDocks)) by todatetime(ingestionTime)"
      },
      "eventhouseItem": {
        "itemId": "698eeb6f-0d44-94e0-4be6-30d57ce59f85",
        "workspaceId": "00000000-0000-0000-0000-000000000000",
        "itemType": "KustoDatabase"
      },
      "eventTimeSettings": {
        "ingestionDelayInSeconds": 0,
        "timeFieldName": "ingestionTime"
      },
      "queryParameters": [
        {
          "name": "startTime",
          "type": "DURATION_START",
          "value": "datetime(2025-07-28T17:54:41Z)"
        },
        {
          "name": "_placeHolder__end",
          "type": "DURATION_END",
          "value": "datetime(2025-07-28T18:54:41Z)"
        }
      ],
      "metadata": {
        "workspaceId": "fdcb52e6-6235-412a-9255-f9ea8d995e43",
        "measureName": "Available Docks",
        "dashboardId": "586c3b46-3890-4538-9fc2-80df0e356f94",
        "visualId": "f4276e74-e8d0-4433-a998-7aaf61d4f2e9"
      },
      "parentContainer": {
        "targetUniqueIdentifier": "dde3b0f1-8bc6-4b56-b2a4-cf5eda7f2aaf"
      }
    },
    "type": "kqlSource-v1"
  },
  {
    "uniqueIdentifier": "4771e7fe-495c-4a36-8c73-29b0d6ea697a",
    "payload": {
      "name": "Bicycles event",
      "parentContainer": {
        "targetUniqueIdentifier": "dde3b0f1-8bc6-4b56-b2a4-cf5eda7f2aaf"
      },
      "definition": {
        "type": "Event",
        "instance": "{\"templateId\":\"SourceEvent\",\"templateVersion\":\"1.1\",\"steps\":[{\"name\":\"SourceEventStep\",\"id\":\"ac39bf68-e52e-4e77-b7cb-35f733221e3d\",\"rows\":[{\"name\":\"SourceSelector\",\"kind\":\"SourceReference\",\"arguments\":[{\"name\":\"entityId\",\"type\":\"string\",\"value\":\"f19499fa-7253-449c-97a9-8698662d455c\"}]}]}]}"
      }
    },
    "type": "timeSeriesView-v1"
  },
  {
    "uniqueIdentifier": "72f3c8a2-f270-4ba0-9585-624d445db210",
    "payload": {
      "name": "Bicycles alert",
      "parentContainer": {
        "targetUniqueIdentifier": "dde3b0f1-8bc6-4b56-b2a4-cf5eda7f2aaf"
      },
      "definition": {
        "type": "Rule",
        "instance": "{\"templateId\":\"EventTrigger\",\"templateVersion\":\"1.1\",\"steps\":[{\"name\":\"FieldsDefaultsStep\",\"id\":\"982339ed-cc31-4c68-89b3-9c82a1597942\",\"rows\":[{\"name\":\"EventSelector\",\"kind\":\"Event\",\"arguments\":[{\"kind\":\"EventReference\",\"type\":\"complex\",\"arguments\":[{\"name\":\"entityId\",\"type\":\"string\",\"value\":\"4771e7fe-495c-4a36-8c73-29b0d6ea697a\"}],\"name\":\"event\"}]}]},{\"name\":\"EventDetectStep\",\"id\":\"9096a165-7ff0-4d1f-bfcd-ef3b0678a447\",\"rows\":[{\"name\":\"EventFieldSelector\",\"kind\":\"EventField\",\"arguments\":[{\"name\":\"fieldName\",\"type\":\"string\",\"value\":\"Available Docks\"}]},{\"name\":\"NumberValueCondition\",\"kind\":\"NumberValueCondition\",\"arguments\":[{\"name\":\"op\",\"type\":\"string\",\"value\":\"IsGreaterThanOrEqualTo\"},{\"name\":\"threshold\",\"type\":\"number\",\"value\":1500.0}]}]},{\"name\":\"ActStep\",\"id\":\"fa35abaf-ca95-478d-8ecd-1428b53ec825\",\"rows\":[{\"name\":\"EmailBinding\",\"kind\":\"EmailMessage\",\"arguments\":[{\"name\":\"messageLocale\",\"type\":\"string\",\"value\":\"\"},{\"name\":\"sentTo\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"georgian2133@ishaanvitc.shop\"}]},{\"name\":\"copyTo\",\"type\":\"array\",\"values\":[]},{\"name\":\"bCCTo\",\"type\":\"array\",\"values\":[]},{\"name\":\"subject\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"Activator Alert: Daily Available Docks Report\"}]},{\"name\":\"headline\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"New event from Bicycles\"}]},{\"name\":\"optionalMessage\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"\"}]},{\"name\":\"additionalInformation\",\"type\":\"array\",\"values\":[]}]}]}]}",
        "settings": {
          "shouldRun": true,
          "shouldApplyRuleOnUpdate": false
        }
      }
    },
    "type": "timeSeriesView-v1"
  }
]